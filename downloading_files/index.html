<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://heal-docs-dev.io/downloading_files/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Data File Downloads - HEAL Platform Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">HEAL Platform Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Data and Repositories <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../hosted_data_types/" class="dropdown-item">Types of Hosted Data</a>
</li>
                                    
<li>
    <a href="../data_mgmt_and_repos/" class="dropdown-item">Data Management and Repositories</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">HEAL Platform Features <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../platform_login/" class="dropdown-item">Login Page</a>
</li>
                                    
<li>
    <a href="../platform_discovery_page/" class="dropdown-item">Discovery Page</a>
</li>
                                    
<li>
    <a href="../platform_request_access/" class="dropdown-item">Access check/request</a>
</li>
                                    
<li>
    <a href="../platform_workspaces/" class="dropdown-item">Workspaces</a>
</li>
                                    
<li>
    <a href="../platform_example_analyses/" class="dropdown-item">Example Analysis Page</a>
</li>
                                    
<li>
    <a href="../platform_profile_page/" class="dropdown-item">Profile Page</a>
</li>
                                </ul>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Data File Downloads</a>
                            </li>
                            <li class="navitem">
                                <a href="../platform_tutorial_videos/" class="nav-link">Tutorial Videos</a>
                            </li>
                            <li class="navitem">
                                <a href="../faqs/" class="nav-link">FAQs</a>
                            </li>
                            <li class="navitem">
                                <a href="../contact/" class="nav-link">Contact</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../platform_profile_page/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../platform_tutorial_videos/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#5-downloading-data-files" class="nav-link">5. Downloading Data Files</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#a-download-data-files-from-the-discovery-page" class="nav-link">a) Download Data Files from the Discovery Page</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#b-download-data-files-using-the-gen3-client" class="nav-link">b) Download Data Files using the Gen3-client</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#c-download-data-files-in-workspaces-using-the-python-sdk" class="nav-link">c) Download Data Files in Workspaces using the Python SDK</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="5-downloading-data-files">5. Downloading Data Files<a class="headerlink" href="#5-downloading-data-files" title="Permanent link">&para;</a></h1>
<p>Users can download data files associated with a study by downloading the files directly from the Discovery page, or leveraging the CTDS-owned python software development kit (SDK) and the tool “Gen3-client” if the file size exceeds 250 MB.</p>
<p>Note that current studies that have datasets of more than 250 MB are those with the following project numbers: a) cdcwonder and b) deaarcos1.</p>
<p>Note, that accessing data files requires linked access to all FAIR enabled repositories, as described <a href="#LinkingAccessTo">here</a>. A pop-up window will remind users:</p>
<p><img alt="workspace_login_other_commons_discovery" src="../img/workspace_login_other_commons_discovery.png" /></p>
<p>Users are reminded to link the account to all other FAIR enabled repositories, as described <a href="#LinkingAccessTo">here</a>.</p>
<h2 id="a-download-data-files-from-the-discovery-page">a) Download Data Files from the Discovery Page<a class="headerlink" href="#a-download-data-files-from-the-discovery-page" title="Permanent link">&para;</a></h2>
<p>Users can download data files up to sizes of 250 MB directly from the Discovery Page.  </p>
<p>Below you find the simple steps to do so.</p>
<ol>
<li>
<p>Navigate to the <a href="#Discovery">Discovery Page</a>. Link your accounts to FAIR repositories as described <a href="#LinkingAccessTo">here</a>.  </p>
</li>
<li>
<p>Find the study of interest by using the <a href="#SearchFeatures">search features</a> or the <a href="#FindAvailableDatasets">list of accessible studies</a>.  </p>
</li>
<li>
<p>Select the clickable box next to the study.<br />
    Click on "Download ZIP", which will initiate the data download.<br />
<img alt="download_discovery_prepared_1" src="../img/download_discovery_prepared_1.png" /></p>
<p>Select the study and click "Download ZIP".</p>
</li>
<li>
<p>Users will be prompted with a window that shows the download is being prepared.<br />
    Please do not navigate away from this page until the download is complete.<br />
<img alt="download_discovery_prepared_2" src="../img/download_discovery_prepared_2.png" /></p>
<p>After clicking "Download ZIP", your download is being prepared. Please do not navigate away from this page until the download is complete.</p>
</li>
<li>
<p>Users will be notified once the download is ready. If the download doesn't start automatically, please follow the link prompted.<br />
<img alt="download_discovery_prepared_3" src="../img/download_discovery_prepared_3.png" /></p>
<p>Users will be notified once the download is ready. Save the file(s) by selecting the directory using the prompted window.</p>
</li>
<li>
<p>If the file size exceeds 250 MB, users will be notified to deselect studies to reduce the size or use other tools:<br />
<img alt="download_discovery_failed" src="../img/download_discovery_failed.png" /></p>
<p>Users are advised to use other tools to download the files if the total file size exceeds 250 MB. <a href="#DownloadFilesClientSDK">Please see the next section for a step-by-step guide using these tools</a>.</p>
</li>
</ol>
<h2 id="b-download-data-files-using-the-gen3-client">b) Download Data Files using the Gen3-client<a class="headerlink" href="#b-download-data-files-using-the-gen3-client" title="Permanent link">&para;</a></h2>
<p>In order to download data files above 250 MB, users will need to utilize the Gen3-client command line tool developed by the University of Chicago’s Center for Translational Data Science.</p>
<p>The current studies that have datasets of more than 250 MB are those with the following project numbers: a) cdcwonder and b) deaarcos1.</p>
<p>Find below a guide to download data files using the Gen3-client:</p>
<ol>
<li>
<p>Log in to the HEAL Platform on <a href="https://healdata.org/login">healdata.org/login</a>. Link your accounts to FAIR repositories as described <a href="#LinkingAccessTo">here</a>.  </p>
</li>
<li>
<p>Find and select one or multiple studies of interest on the <a href="https://healdata.org/discovery">Discovery Page</a>. For multiple studies, select "Data Availability" in the top right corner, click “Available”, and choose multiple studies.</p>
</li>
<li>
<p>Click on the button “Download Manifest".</p>
</li>
</ol>
<p><img alt="discovery_select_study_download_manifest" src="../img/discovery_select_study_download_manifest.png" /></p>
<p>Select a study of interest, then click on the button “Download Manifest".</p>
<ol>
<li>Create and download an API key from your <a href="https://healdata.org/identity">Profile Page</a>. Note where you save the API key on your local machine.  </li>
</ol>
<p><img alt="profile_APIkey" src="../img/profile_APIkey.png" /></p>
<p>Create an API key on the profile page.</p>
<p><img alt="profile_APIkey_created" src="../img/profile_APIkey_created.png" /></p>
<p>Download the API key as json file and note the directory where the API key was saved for step 6.</p>
<ol>
<li>
<p>Download and configure the Gen3-client<br />
    a. Follow the download instructions of the Gen3-client <a href="https://gen3.org/resources/user/gen3-client/#1-installation-instructions">here</a>. The client can be downloaded <a href="https://github.com/uc-cdis/cdis-data-client/releases/latest">here</a>.  </p>
<p>b. In your terminal, configure your profile using the following command:  </p>
<p><code>shell
gen3-client configure --profile=&lt;profile_name&gt; --cred=&lt;credentials.json&gt; --apiendpoint=&lt;api_endpoint_url&gt;`</code></p>
<p>Mac/Linux:   </p>
<p><code>bash
gen3-client configure --profile=demo   --cred=~/Downloads/demo-credentials.json --apiendpoint=https://healdata.org/</code></p>
<p>Windows:   </p>
<p><code>ps
gen3-client configure --profile=demo   --cred=C:\Users\demo\Downloads\demo-credentials.json --apiendpoint=https://healdata.org/</code></p>
<p>If the command was succesful, you should get the following output:</p>
<p><code>10:08:20 Profile 'demo' has been configured successfully.</code></p>
<p>If successfully executed, a configuration file will be stored under the directory the user specified under “cred”. For troubleshooting, refer to the instructions found <a href="https://gen3.org/resources/user/gen3-client/#2-configure-a-profile-with-credentials">here</a>.  </p>
<p>c. Download files by using the following command, which references the manifest file name and its location:  </p>
<p><code>bash
gen3-client download-multiple --profile=&lt;profile_name&gt; --manifest=&lt;manifest_file&gt; --download-path=&lt;path_for_files&gt;</code>
For example:
<code>bash
gen3-client download-multiple --profile=demo --manifest=manifest.json --download-path=downloads</code></p>
<p><code>bash 
2021/06/03 16:48:46 Reading manifest...   200 B / 200 B [===================] 100.00% 0s  
WARNING: flag "rename" was set to false in "original" mode, duplicated files under "downloads/" will be overwritten   
Proceed? [y/n]:</code></p>
<p>Enter:</p>
<p><code>bash
y</code></p>
<p>Output:</p>
<p><code>bash
2021/06/03 16:48:47 Total number of GUIDs: 1   2021/06/03 16:48:47 Preparing file info for each file, please wait...   1 / 1 [============================================] 100.00% 0s   2021/06/03 16:48:47 File info prepared successfully   arcos_all_washpost.tsv.gz 6.41 GiB / 6.41 GiB [=======================================================] 100.00% 0s</code></p>
</li>
</ol>
<h2 id="c-download-data-files-in-workspaces-using-the-python-sdk">c) Download Data Files in Workspaces using the Python SDK<a class="headerlink" href="#c-download-data-files-in-workspaces-using-the-python-sdk" title="Permanent link">&para;</a></h2>
<p>Users can download data files to the workspaces by leveraging the CTDS-owned python software development kit (SDK). Follow instructions below.</p>
<ol>
<li>
<p>Log in to the Data Commons on <a href="https://healdata.org/login">healdata.org/login</a>. Link your accounts to FAIR repositories as described <a href="#LinkingAccessTo">here</a>.  </p>
</li>
<li>
<p>Find and select one or multiple studies of interest on the <a href="https://healdata.org/discovery">Discovery Page</a>. Select "Data Availability" in the top right corner and click on “Available” to see all available studies.  </p>
</li>
<li>
<p>Select a study and click on "Open in Workspace".<br />
<img alt="static_notebook_bacpac" src="../img/static_notebook_bacpac.png" />  </p>
</li>
<li>
<p>Select a workspace VM and click "Launch". Choose the "(Generic) Jupyter Notebook with R kernel" if you are familiar with setting up Python- or R-based Notebooks, or if you just exported one or multiple studies from the Discovery Page and want to start your custom analysis. Choose a VM with the name of the Notebook if you selected the studies relevant to a specific Notebook and want to work on the Notebook in interactive mode.<br />
<img alt="Workspace_flavors" src="../img/workspace_flavors.png" /></p>
<p>Available workspaces on the HEAL Platform (top). Users need to link accounts from other repositories (bottom; click <a href="#LinkingAccessTo">here to see how</a>).</p>
</li>
<li>
<p>Find all files under /data/healdata.org/ with the ending "PLACEHOLDER". These files can be directly downloaded either in the terminal or in a notebook cell.<br />
<img alt="workspace_placeholder" src="../img/workspace_placeholder.png" />  </p>
</li>
<li>
<p>Click on one file and copy the command and GUID.<br />
<img alt="workspace_placeholder_guid" src="../img/workspace_placeholder_guid.png" />  </p>
</li>
<li>
<p>Open a new terminal under "New". <img alt="workspace_terminal" src="../img/workspace_terminal.png" />  </p>
</li>
<li>
<ul>
<li>Type in the following command to download the file to the terminal:<br />
<code>bash
    gen3 drs-pull object "guid"</code></li>
</ul>
<p><img alt="workspace_terminal_download" src="../img/workspace_terminal_download.png" />  </p>
<ul>
<li>If you are working in a notebook, type in the following command into a code cell to download the file:  </li>
</ul>
<blockquote>
<p><code>!gen3 drs-pull object "guid"</code>  </p>
</blockquote>
<p><img alt="workspace_download_one_file_sdk" src="../img/workspace_download_one_file_sdk.png" />  </p>
<ul>
<li>
<p>If you use the R kernel, change the command into <code>system("gen3 drs-pull object 'guid'")</code>  </p>
</li>
<li>
<p>Note, that you can also use the manifest.json to download in batches, see below: <img alt="workspace_download_from_manifest_sdk" src="../img/workspace_download_from_manifest_sdk.png" /></p>
<p>Download files in batches with a file manifest using the commands shown above.</p>
</li>
</ul>
</li>
<li>
<p>The file(s) should be downloaded and is ready to be worked with in your Notebook.<br />
<img alt="workspace_terminal_downloaded" src="../img/workspace_terminal_downloaded.png" /></p>
<p>Downloaded files can be found in your home directory.</p>
</li>
</ol></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
